
<div class="container">
  <div class="card">
    <!-- <div class="row">
       <div class="col-6">
           <h4 style="border-left: 3px solid #3B82F6;">&nbsp;{{heading}}</h4>
      </div>
       <div class="col-6" style="text-align:right !important;"  && row != 1">
        <p-button icon="pi pi-fw pi-cog" styleClass="p-button p-button-sm p-button-secondary" (click)="setting.toggle($event)"></p-button>
      </div>
    </div> -->
      <div class="table-header row" style="margin-top: 8px;margin-bottom: 8px;">

          <span *ngIf="row == 1" style="color:var(--red-600)" translate>Not Record Found!</span>
          <div class="col-md-6">
            <span class="p-input-icon-left ml-auto" *ngIf="AllowGlobalFilter && row != 1">
              <i class="pi pi-search"></i>
              <input  pInputText type="text" (input)="applyFilterGlobal($event, 'contains',table)" [placeholder]="'Search keyword'|translate" />
            </span>
          </div>

          <div class="col-md-6" style="text-align:right !important;">
            <span class="p-buttonset" *ngIf="AllowPrintButtons && row != 1">
              <p-button (click)="confirmDailog()" icon="pi pi-send" styleClass="p-button p-button-sm p-button-secondary" *ngIf="AllowSendMail" [style]="{'margin-right': '8px', 'border-radius':'0.25rem'}" title="Send Mail"></p-button>
              <p-button (click)="op.toggle($event)" icon="pi pi-angle-down" styleClass="p-button p-button-sm p-button-info" [style]="{'margin-right': '8px' , 'border-radius':'0.25rem' }" title="Show/Hide Columns"></p-button>
              <p-button icon="pi pi-file-excel" styleClass="p-button p-button-sm p-button-success" (onClick)="dt.exportCSV();" [style]="{'margin-right': '8px' , 'border-radius':'0.25rem'}" title="Export Excel"></p-button>
              <p-button icon="pi pi-file-pdf" styleClass="p-button p-button-sm p-button-danger" (onClick)="exportPdf()" [style]="{'margin-right': '8px' , 'border-radius':'0.25rem'}" title="Export PDF"></p-button>
              <p-button icon="pi pi-fw pi-cog" styleClass="p-button p-button-sm p-button-secondary" (click)="reportSettingVisiblity=true" *ngIf="AllowHeaderSetting" [style]="{'margin-right': '8px' , 'border-radius':'0.25rem'}" title="Header Footer Setting"></p-button>
            </span>
          </div>
        </div>
      <p-table #dt [columns]="selectedColumns" selectionMode="single"
      [value]="data" styleClass="p-datatable-striped"
      [scrollable]="true" scrollHeight="420px" scrollDirection="vertical">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns">
            {{col.header | translate}}
            <!-- <p-columnFilter type="text" [field]="col.field" display="menu"></p-columnFilter> -->
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body"
        let-obj let-columns="columns">
        <tr>
          <ng-container *ngFor="let col of columns">
            <!-- <td style="text-align: left !important;min-width:15rem;" *ngIf="!col.isHidden && col.controlType === enum_ColTypes.Date " >{{ obj[col.field] | date:"dd/MM/yyyy" }} </td> -->
            <!-- <td style="text-align: left !important;min-width:15rem;" *ngIf="!col.isHidden && !col.uppercase && col.controlType != enum_ColTypes.Date " >{{ obj[col.field]}} </td> -->
            <td *ngIf="col.controlType == enum_ColTypes.Date">
              {{obj[col.field] | timezoneDate:"dd-MM-yyyy hh:mm:ss"}}
            </td>
            <!-- <td *ngIf="col.controlType != enum_ColTypes.Date && col.controlType != enum_ColTypes.CustomDetailControl">
              {{obj[col.field]}}
            </td> -->
            <td *ngIf="col.controlType != enum_ColTypes.Date && col.controlType != enum_ColTypes.link && col.controlType != enum_ColTypes.Currency"
            [ngStyle]="{'color': (obj[col.field]<0) ? 'red' : 'gray-900'}">
              {{obj[col.field] }}
            </td>

            <td *ngIf="col.controlType != enum_ColTypes.Date && col.controlType == enum_ColTypes.link">
               <a (click)="viewInvoiceDetail(obj[col.field])" style="color:blue;" class="invoiceNo">{{obj[col.field]}}</a>
            </td>

            <td *ngIf="col.controlType != enum_ColTypes.Date && col.controlType == enum_ColTypes.Currency"
            [ngStyle]="{'color': (obj[col.field]<0) ? 'red' : 'gray-900'}">
              {{obj[col.field] | number : '1.2-2'}}
            </td>
          </ng-container>
        </tr>
      </ng-template>
    </p-table>
</div>
</div>

<p-overlayPanel #op [style]="{'width': '450px'}">
  <ng-template pTemplate="content">
    <div class="row">
      <div *ngFor="let colName of cols"  class="field-checkbox" class="col-6" style="margin-bottom: 10px;">
        <p-checkbox name="group" [value]="colName"  [(ngModel)]="selectedColumns" label="{{colName.header | translate}}"></p-checkbox>
      </div>
    </div>
  </ng-template>
</p-overlayPanel>

<p-overlayPanel #setting>
  <ng-template pTemplate="content">
    <button type="button" class="btn btn-primary btn-sm" (click)="reportSettingVisiblity=true" translate>Report Setting</button>
  </ng-template>
</p-overlayPanel>

<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>

<p-dialog #cstDailog [modal]="true" [(visible)]="reportSettingVisiblity" [style]="{width: '40vw'}">
  <app-report-setting (dataEvent)="handleChildData($event)"></app-report-setting>
</p-dialog>
