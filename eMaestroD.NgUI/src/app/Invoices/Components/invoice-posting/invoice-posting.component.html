<div class="card">
  <div class="row">
      <div class="col-6">
          <h4 style="border-left: 3px solid #3B82F6;" translate>&nbsp;Invoice Posting
            <a *ngIf="!bookmark"  (click)="UpdateBookmark(true)" title="Add Bookmark"><i class="pi pi-bookmark" style="font-size: 1.5rem;"></i></a>
            <a *ngIf="bookmark" (click)="UpdateBookmark(false)" title="Remove Bookmark"><i class="pi pi-bookmark-fill" style="font-size: 1.5rem;"></i></a>
          </h4>
      </div>
  </div>




  <p-table #dt1 [value]="invoices" dataKey="invoiceID"  styleClass="p-datatable-striped"
      [(selection)]="selectedInvoice"
      [rows]="100" [showCurrentPageReport]="true" [rowsPerPageOptions]="[100,500,1000]" [loading]="loading"
      [paginator]="true" scrollHeight="100px" [scrollable]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [globalFilterFields]="['cstName','dtTx','amount','invoiceVoucherNo']">
      <ng-template pTemplate="caption">
          <div class="table-header row" style="margin-top: 8px;margin-bottom: 8px;">
            <div class="col-md-12">
              <label class="col-form-label date-label required" translate>Date From<span>:</span>&nbsp;</label>
              <p-calendar #inputField [autofocus]="true" pAutoFocus [(ngModel)]="DateFrom" dateFormat="dd/mm/yy" (onSelect)="onDateFromSelect()"></p-calendar>
              &nbsp;
              <label class="col-form-label date-label required" translate>Date To <span>:</span>&nbsp;</label>
              <p-calendar #inputField [(ngModel)]="DateTo" [minDate]="minDateTo" [maxDate]="maxDateTo" dateFormat="dd/mm/yy"></p-calendar>
              &nbsp;
              <button #savebtn (click)="submit()" translate class="btn btn-primary btnSetting"> <i class="pi pi-search"></i> Load Invoices</button>

              <button #savebtn *ngIf="selectedInvoice.length > 0" (click)="Save()" translate class="btn btn-primary btnSetting float-end"> <i class="pi pi-save"></i> Post Invoice</button>
            </div>

            </div>
      </ng-template>
      <ng-template pTemplate="header">
          <tr>
              <th style="min-width:6rem;text-align: center;"  pFrozenColumn translate>
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th>
              <th style="min-width:13rem" translate>
                  <div class="flex justify-content-center align-items-left" translate>
                      Invoice Date
                  </div>
              </th>
              <th style="min-width:12rem" translate>
                  <div class="flex justify-content-center align-items-left" translate>
                      Invoice No
                  </div>
              </th>
              <th style="min-width:8rem" translate>
                <div class="flex justify-content-center align-items-left" translate>
                    Type
                </div>
            </th>
              <th style="min-width:12rem" translate>
                Supplier Name
              </th>
              <th style="min-width:6rem" translate>
                      Amount
              </th>
              <th style="min-width:6rem">
                Status
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-invoices>
          <tr style="padding:0px">
              <td pFrozenColumn style="text-align: center !important;z-index: 0;">
                <p-tableCheckbox [value]="invoices"></p-tableCheckbox>
              </td>
              <td>
                  {{invoices.invoiceDate | timezoneDate : "dd-MM-yyyy hh:mm:ss"}}
              </td>
              <td>
                <a (click)="viewInvoiceDetail(invoices.invoiceVoucherNo)" style="color:blue;" class="invoiceNo">{{invoices.invoiceVoucherNo}} </a>
              </td>
              <td>
                {{invoices.invoiceType}}
              </td>
              <td>
                <a *ngIf="invoices.invoiceType.toLowerCase() == 'credit'" href="Reports/SupplierLedgerReport/{{invoices.CustomerOrVendorID}}" target="_blank">{{invoices.customerOrVendorName}} </a>
                <span *ngIf="invoices.invoiceType.toLowerCase() != 'credit'">{{invoices.customerOrVendorName}} </span>
              </td>
              <td>
                  {{invoices.netTotal | number : '1.2-2'}}
              </td>
              <td style="text-align: center;">
                <p-chip *ngIf="invoices.isApproved"
                  [label]="invoices.transactionStatus"
                  [styleClass]="'green-chip'">
                </p-chip>
              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
          <tr>
              <td colspan="7" translate>No Record found.</td>
          </tr>
      </ng-template>
  </p-table>
</div>

<p-confirmDialog></p-confirmDialog>

