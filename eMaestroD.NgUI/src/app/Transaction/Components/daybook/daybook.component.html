<div class="card">
  <div class="row">
      <div class="col-6">
          <h4 style="border-left: 3px solid #3B82F6;" translate>&nbsp;{{heading}}
            <a *ngIf="!bookmark"  (click)="UpdateBookmark(true)" title="Add Bookmark"><i class="pi pi-bookmark" style="font-size: 1.5rem;"></i></a>
            <a *ngIf="bookmark" (click)="UpdateBookmark(false)" title="Remove Bookmark"><i class="pi pi-bookmark-fill" style="font-size: 1.5rem;"></i></a>
          </h4>
      </div>
      <!-- <div class="col-6">
        <button  class="btn btn-outline-primary" style="float: right;" (click)="OpenLedger()">Ledger</button>
      </div> -->
      <!-- <div class="col-6" style="text-align: right;">
      <button pButton type="button" icon="pi pi-plus" [routerLink]="'./../AddNewSale'" style="padding: 0.5rem !important;">Add New</button>
      </div> -->
  </div>
  <p-table #dt1 [value]="invoices" dataKey="id" styleClass="p-datatable-striped"
      [rows]="100" [showCurrentPageReport]="true" [rowsPerPageOptions]="[100,500,1000]" [loading]="loading"
      [paginator]="true" scrollHeight="100px" [scrollable]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [globalFilterFields]="['cstName','dtTx','type','amount','voucherNo','glComments']">
      <ng-template pTemplate="caption">

          <div class="table-header row" style="margin-top: 8px;margin-bottom: 8px;">
              <div class="col-md-6">
                <p-calendar #inputField [(ngModel)]="selectedDate" (ngModelChange)="getData()" [showIcon]="true" dateFormat="dd/mm/yy"></p-calendar>
              </div>
              <div class="col-md-6" style="text-align:right !important;">
                <span class="p-buttonset">
                  <!-- <p-button icon="pi pi-plus" styleClass="p-button p-button-sm" [routerLink]="'./../AddNewPayment'" ></p-button> -->
                  <p-button icon="pi pi-file-excel" styleClass="p-button p-button-sm p-button-success btns" (onClick)="exportExcel()" title="Export Excel" [style]="{'margin-right': '8px'}" ></p-button>
                  <p-button icon="pi pi-file-pdf" styleClass="p-button p-button-sm p-button-danger btns" (onClick)="exportPdf()" title="Export PDF"></p-button>
                </span>
              </div>
            </div>
      </ng-template>
      <ng-template pTemplate="header">
          <tr>
              <!-- <th style="min-width:10rem;text-align: center;"  pFrozenColumn>ACTIONS</th> -->
              <th style="min-width:12rem" translate>
                  <div class="flex justify-content-center align-items-center" translate>
                      Invoice Date
                  </div>
              </th>
              <th style="min-width:12rem" translate>
                  <div class="flex justify-content-center align-items-center" translate>
                      Invoice No
                  </div>
              </th>
              <th style="min-width:12rem" translate>
                    Name
              </th>
              <th style="min-width:8rem" translate>
                Type
              </th>
              <th style="min-width:12rem" translate>
                  <div class="flex justify-content-center align-items-right" translate>
                      Debit
                  </div>
              </th>
              <th style="min-width:12rem" translate>
                <div class="flex justify-content-center align-items-right" translate>
                    Credit
                </div>
            </th>
              <!-- <th th style="min-width:11rem">

              </th> -->
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-invoices>
          <tr>
              <!-- <td pFrozenRow style="text-align: center !important;">
                  <span class="p-buttonset">
                    <p-button (onClick)="printView(invoices.voucherNo)"  icon="pi pi-file-pdf" styleClass="p-button-rounded p-button-info p-button-text"></p-button>
                    <p-button (onClick)="editView(invoices.voucherNo)" icon="pi pi-pencil" styleClass="p-button-rounded p-button-success p-button-text"></p-button>
                    <p-button (onClick)="deleteView(invoices.voucherNo)" icon="pi pi-trash" styleClass="p-button-rounded p-button-danger p-button-text"></p-button>
                  </span>
              </td> -->
              <td>
                  {{invoices.dtTx | timezoneDate : "dd-MM-yyyy hh:mm:ss"}}
              </td>
              <td>
                <a (click)="viewInvoiceDetail(invoices.voucherNo)" style="color:blue;" class="invoiceNo">{{invoices.voucherNo}} </a>
              </td>
              <td>
                  {{invoices.cstName}}
              </td>
              <td>
                {{invoices.type}}
            </td>
              <td>
                {{invoices.debit | number : '1.2-2'}}
              </td>
              <td>
                {{invoices.credit | number : '1.2-2'}}
              </td>
              <!-- <td>
                  <button pButton type="button" icon="pi pi-file-pdf" (click)="printView(invoices.voucherNo)" class="p-button-secondary"></button>
                  <button pButton type="button" icon="pi pi-pencil" (click)="editView(invoices.voucherNo)"  class="p-button-secondary" style="margin-left: 5px;">
                  </button>
                  <button pButton type="button" icon="pi pi-trash" (click)="deleteView(invoices.voucherNo)" class="p-button-secondary" style="margin-left: 5px;"></button>
              </td> -->
              <!-- <td>
                  <p-progressBar [value]="invoices.amount" [showValue]="false"></p-progressBar>
              </td>
              <td class="text-center">
                  <i class="pi" [ngClass]="{'true-icon pi-check-circle': invoices.dtTx, 'false-icon pi-times-circle': !invoices.dtTx}"></i>
              </td> -->
          </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
          <tr>
              <td colspan="7" translate>No Record found.</td>
          </tr>
      </ng-template>
  </p-table>

  <div class="col-12">
  <h4 style="border-left: 3px solid #3B82F6; margin-top: 10px;" translate>&nbsp;{{headingSaleSummary}}</h4>
</div>

  <p-table #dt1 [value]="SummaryList" styleClass="p-datatable-striped"
  [rows]="100" [showCurrentPageReport]="true" [rowsPerPageOptions]="[100,500,1000]" [loading]="loading"
  [paginator]="true" scrollHeight="100px" [scrollable]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [globalFilterFields]="['cstName','dtTx','amount','voucherNo','glComments']">
  <ng-template pTemplate="caption">

    <div class="table-header row" style="margin-top: 8px;margin-bottom: 8px;">
        <div class="col-md-12" style="text-align:right !important;">
          <span class="p-buttonset">
            <p-button icon="pi pi-file-pdf" styleClass="p-button p-button-sm p-button-danger btns" (onClick)="exportPdfSalesSummary()" title="Export PDF"></p-button>
          </span>
        </div>
      </div>
  </ng-template>
  <ng-template pTemplate="header">
      <tr>
          <th style="min-width:12rem" translate>
              <div class="flex justify-content-center align-items-center" translate>
                  Payment Method
              </div>
          </th>
          <th style="min-width:12rem" translate>
              <div class="flex justify-content-center align-items-center" translate>
                  Sales
              </div>
          </th>
          <th style="min-width:12rem" translate>
                Sales Return
          </th>
          <th style="min-width:8rem" translate>
                Net Sales
          </th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-summary>
    <tr style="font-weight: bold;">
        <td>{{ summary.paymentMethod }}</td>
        <td>{{ summary.sales | number: '1.2-2' }}</td>
        <td>{{ summary.salesReturn | number: '1.2-2' }}</td>
        <td>{{ summary.netSales | number: '1.2-2' }}</td>
    </tr>
</ng-template>

  <ng-template pTemplate="emptymessage">
      <tr>
          <td colspan="7" translate>No Record found.</td>
      </tr>
  </ng-template>
</p-table>
</div>


<p-dialog [(visible)]="PrintringVisible" [style]="{width: '30vw'}">
  <div class="container">
        <input type="radio" id="css" name="fav_language" (change)="onChangePrint($event)" value="A4" checked>
        <label for="css" translate>A4 View</label><br>
        <input type="radio" id="html" name="fav_language" (change)="onChangePrint($event)" value="thermal">
        <label for="html" translate>Thermal View</label><br>
      <br>
      <button (click)="onPrinterClick()" translate autofocus class="btn btn-outline-primary">Submit</button>
  </div>
</p-dialog>

<p-dialog [(visible)]="Reportvisible" [style]="{width: '60vw'}">
  <div class="container" *ngIf="Reportvisible">
      <app-invoices [voucherName]="invoiceNo" [type]="printtype"></app-invoices>
  </div>
</p-dialog>

<p-dialog [(visible)]="InvoiceDetailvisible" [style]="{width: '60vw'}">
  <div class="container" *ngIf="InvoiceDetailvisible">
      <app-invoices [voucherName]="invoiceNo" [type]="printtype"></app-invoices>
  </div>
</p-dialog>
